<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>bedquilt.core documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Bedquilt</span> <span class="project-version">0.1.0</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="intro.html"><div class="inner"><span>Introduction to bedquilt</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>bedquilt</span></div></div></li><li class="depth-2 current"><a href="bedquilt.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="bedquilt.core.html#var-add-constraints"><div class="inner"><span>add-constraints</span></div></a></li><li class="depth-1"><a href="bedquilt.core.html#var-collection-exists"><div class="inner"><span>collection-exists</span></div></a></li><li class="depth-1"><a href="bedquilt.core.html#var-count"><div class="inner"><span>count</span></div></a></li><li class="depth-1"><a href="bedquilt.core.html#var-create-collection"><div class="inner"><span>create-collection</span></div></a></li><li class="depth-1"><a href="bedquilt.core.html#var-delete-collection"><div class="inner"><span>delete-collection</span></div></a></li><li class="depth-1"><a href="bedquilt.core.html#var-distinct"><div class="inner"><span>distinct</span></div></a></li><li class="depth-1"><a href="bedquilt.core.html#var-find"><div class="inner"><span>find</span></div></a></li><li class="depth-1"><a href="bedquilt.core.html#var-find-one"><div class="inner"><span>find-one</span></div></a></li><li class="depth-1"><a href="bedquilt.core.html#var-find-one-by-id"><div class="inner"><span>find-one-by-id</span></div></a></li><li class="depth-1"><a href="bedquilt.core.html#var-insert"><div class="inner"><span>insert</span></div></a></li><li class="depth-1"><a href="bedquilt.core.html#var-list-collections"><div class="inner"><span>list-collections</span></div></a></li><li class="depth-1"><a href="bedquilt.core.html#var-list-constraints"><div class="inner"><span>list-constraints</span></div></a></li><li class="depth-1"><a href="bedquilt.core.html#var-make-db-spec"><div class="inner"><span>make-db-spec</span></div></a></li><li class="depth-1"><a href="bedquilt.core.html#var-remove"><div class="inner"><span>remove</span></div></a></li><li class="depth-1"><a href="bedquilt.core.html#var-remove-constraints"><div class="inner"><span>remove-constraints</span></div></a></li><li class="depth-1"><a href="bedquilt.core.html#var-remove-one"><div class="inner"><span>remove-one</span></div></a></li><li class="depth-1"><a href="bedquilt.core.html#var-remove-one-by-id"><div class="inner"><span>remove-one-by-id</span></div></a></li><li class="depth-1"><a href="bedquilt.core.html#var-save"><div class="inner"><span>save</span></div></a></li><li class="depth-1"><a href="bedquilt.core.html#var-with-connection"><div class="inner"><span>with-connection</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">bedquilt.core</h1><div class="doc"><pre class="plaintext"></pre></div><div class="public anchor" id="var-add-constraints"><h3>add-constraints</h3><div class="usage"><code>(add-constraints spec collection-name constraints)</code></div><div class="doc"><pre class="plaintext">Add a set of constraints to the collection.
Returns true if any constraints were added by this command</pre></div></div><div class="public anchor" id="var-collection-exists"><h3>collection-exists</h3><div class="usage"><code>(collection-exists spec collection-name)</code></div><div class="doc"><pre class="plaintext">Check if a collection exists currently.
Returns boolean.</pre></div></div><div class="public anchor" id="var-count"><h3>count</h3><div class="usage"><code>(count spec collection-name)</code><code>(count spec collection-name query-doc)</code></div><div class="doc"><pre class="plaintext">Get a count of documents in the collection.
</pre></div></div><div class="public anchor" id="var-create-collection"><h3>create-collection</h3><div class="usage"><code>(create-collection spec collection-name)</code></div><div class="doc"><pre class="plaintext">Create a collection if it does not already exist.
Returns boolean indicating whether the collection was created by this command.</pre></div></div><div class="public anchor" id="var-delete-collection"><h3>delete-collection</h3><div class="usage"><code>(delete-collection spec collection-name)</code></div><div class="doc"><pre class="plaintext">Delete a collection if it exists.
Returns boolean indicating whether the collection was deleted by this command.</pre></div></div><div class="public anchor" id="var-distinct"><h3>distinct</h3><div class="usage"><code>(distinct spec collection-name dotted-path)</code></div><div class="doc"><pre class="plaintext">Get a sequence of unique values at the given dotted-path.
Example: (bq/distinct db &quot;people&quot; &quot;address.city&quot;)</pre></div></div><div class="public anchor" id="var-find"><h3>find</h3><div class="usage"><code>(find spec collection-name)</code><code>(find spec collection-name query-doc)</code><code>(find spec collection-name query-doc {:keys [skip limit sort], :as options})</code></div><div class="doc"><pre class="plaintext">Find documents from the collection matching a given query.
</pre></div></div><div class="public anchor" id="var-find-one"><h3>find-one</h3><div class="usage"><code>(find-one spec collection-name query-doc)</code></div><div class="doc"><pre class="plaintext">Find a single document from the collection matching a given query.
Returns a map, or nil if not found.</pre></div></div><div class="public anchor" id="var-find-one-by-id"><h3>find-one-by-id</h3><div class="usage"><code>(find-one-by-id spec collection-name doc-id)</code></div><div class="doc"><pre class="plaintext">Find a single document which has a _id equal to the supplied doc-id.
Returns a map, or nil if not found.</pre></div></div><div class="public anchor" id="var-insert"><h3>insert</h3><div class="usage"><code>(insert spec collection-name doc)</code></div><div class="doc"><pre class="plaintext">Insert a document (map) into the collection
</pre></div></div><div class="public anchor" id="var-list-collections"><h3>list-collections</h3><div class="usage"><code>(list-collections spec)</code></div><div class="doc"><pre class="plaintext">Get a list of collections on the server.
Returns a sequence of strings</pre></div></div><div class="public anchor" id="var-list-constraints"><h3>list-constraints</h3><div class="usage"><code>(list-constraints spec collection-name)</code></div><div class="doc"><pre class="plaintext">Get a list of constraints on this collection.
</pre></div></div><div class="public anchor" id="var-make-db-spec"><h3>make-db-spec</h3><div class="usage"><code>(make-db-spec spec)</code></div><div class="doc"><pre class="plaintext">Build a connection spec, same as a clojure.java.jdbc spec.
This function will add the appropriate PostgreSQL bits to the supplied
spec map.
See <a href="http://clojure.github.io/java.jdbc/#clojure.java.jdbc/get-connection">http://clojure.github.io/java.jdbc/#clojure.java.jdbc/get-connection</a>.
Example:
  (def spec (bq/make-db-spec {:subname &quot;//localhost/some_db&quot;
                              :user &quot;a_username&quot;
                              :password &quot;a_bad_password&quot;}))</pre></div></div><div class="public anchor" id="var-remove"><h3>remove</h3><div class="usage"><code>(remove spec collection-name query-doc)</code></div><div class="doc"><pre class="plaintext">Remove documunts matching the supplied query-doc.
</pre></div></div><div class="public anchor" id="var-remove-constraints"><h3>remove-constraints</h3><div class="usage"><code>(remove-constraints spec collection-name constraints)</code></div><div class="doc"><pre class="plaintext">Remove a set of constraints from the collection.
Returns true if any constraints were removed by this command</pre></div></div><div class="public anchor" id="var-remove-one"><h3>remove-one</h3><div class="usage"><code>(remove-one spec collection-name query-doc)</code></div><div class="doc"><pre class="plaintext">Remove a single document matching the supplied query-doc.
</pre></div></div><div class="public anchor" id="var-remove-one-by-id"><h3>remove-one-by-id</h3><div class="usage"><code>(remove-one-by-id spec collection-name doc-id)</code></div><div class="doc"><pre class="plaintext">Remove a single document which has a _id value matching the supplied doc-id.
</pre></div></div><div class="public anchor" id="var-save"><h3>save</h3><div class="usage"><code>(save spec collection-name doc)</code></div><div class="doc"><pre class="plaintext">Save a document (map) to the collection, overwriting any existing
doc with the same _id value.</pre></div></div><div class="public anchor" id="var-with-connection"><h3>with-connection</h3><h4 class="type">macro</h4><div class="usage"><code>(with-connection binding &amp; body)</code></div><div class="doc"><pre class="plaintext">Evaluates body expressions in the context of a single db connection.
Example:
  (bq/with-connection [conn spec]
    (bq/insert conn &quot;things&quot; {:a 1})
    (bq/insert conn &quot;things&quot; {:a 2}))</pre></div></div></div></body></html>